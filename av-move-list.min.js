!function(){"use strict";function MoveListDirective($q){return{restrict:"EA",require:"ngModel",scope:{selectedLabel:"@",availableLabel:"@",displayAttr:"@",idAttr:"@",all:"=",model:"=ngModel"},template:'<div class="multiSelect"><div class="select"><label class="control-label" for="multiSelectAvailable">{{ availableLabel }} ({{ available.length }})</label><select id="multiSelectAvailable" ng-model="selected.available" multiple ng-options="e as e[displayAttr] for e in available"></select></div><div class="select buttons"><button class="btn mover left" ng-click="add()" title="Add selected" ng-disabled="selected.available.length == 0"><i class="glyphicon glyphicon-arrow-right"></i></button><button class="btn mover right" ng-click="remove()" title="Remove selected" ng-disabled="selected.current.length == 0"><i class="glyphicon glyphicon-arrow-left"></i></button></div><div class="select"><label class="control-label" for="multiSelectSelected">{{ selectedLabel }} ({{ model.length }})</label><select id="currentRoles" ng-model="selected.current" multiple class="pull-left" ng-options="e as e[displayAttr] for e in model"></select></div></div>',link:function(scope,elm,attrs){function filterAvailable(all,selected){var available=all.filter(function(item){var is_selected=selected.reduce(function(item_is_selected,selected_item){return item_is_selected||angular.equals(item,selected_item)},!1);return!is_selected});return available}scope.selected={available:[],current:[]},scope.refreshAvailable=function(){scope.available=filterAvailable(scope.all,scope.model),scope.selected.available=[],scope.selected.current=[]},scope.add=function(){scope.model=scope.model.concat(scope.selected.available),scope.refreshAvailable()},scope.remove=function(){scope.model=filterAvailable(scope.model,scope.selected.current),scope.refreshAvailable()};var dataLoading=function(scopeAttr){var loading=$q.defer();return scope[scopeAttr]?loading.resolve(scope[scopeAttr]):scope.$watch(scopeAttr,function(newValue,oldValue){newValue&&loading.resolve(newValue)}),loading.promise};$q.all([dataLoading("model"),dataLoading("all")]).then(function(results){scope.refreshAvailable()})}}}angular.module("autovance.av-move-list",[]).directive("avMoveList",["$q",MoveListDirective])}();